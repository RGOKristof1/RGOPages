<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Text Saver</title>
</head>
<body>

    <!-- Szövegmező a menteni kívánt szöveghez -->
    <textarea id="textInput" rows="10" cols="50" placeholder="Írd ide a menteni kívánt szöveget..."></textarea>
    <br><br>

    <!-- Mentés gomb -->
    <button id="saveBtn">Save</button>

    <p id="status"></p>

    <script>
        document.getElementById("saveBtn").addEventListener("click", async () => {
            const text = document.getElementById("textInput").value;
            const status = document.getElementById("status");
            status.textContent = "Saving...";

            try {
                const response = await fetch(
                    `https://api.github.com/repos/RGOKristof1/rgopages.hu/actions/workflows/update-text.yml/dispatches`,
                    {
                        method: "POST",
                        headers: {
                            "Accept": "application/vnd.github+json",
                            "Authorization": `token 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`
                        },
                        body: JSON.stringify({
                            ref: "main",
                            inputs: {
                                newtext: text
                            }
                        })
                    }
                );

                if (response.ok) {
                    status.textContent = "Saved! Workflow is running...";
                    // Törli a textarea-t mentés után
                    document.getElementById("textInput").value = "";
                } else {
                    status.textContent = "Error! Can't start workflow.";
                    console.error(await response.text());
                }

            } catch (err) {
                status.textContent = "Network error!";
                console.error(err);
            }
        });
    </script>
</body>
</html>
